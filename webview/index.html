<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Security-Policy" content="default-src 'none'; script-src 'self' vscode-resource: 'unsafe-inline'; style-src 'self' 'unsafe-inline';">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Scene</title>
</head>
<body>
<div id="info">Description</div>
<script src="<!-- LocalResource:three.min.js -->"></script>
<script src="<!-- LocalResource:OrbitControls.js -->"></script>
<script src="<!-- LocalResource:utils.js -->"></script>
<script>
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
let renderer = new THREE.WebGLRenderer();
document.body.appendChild(renderer.domElement);
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.domElement.style.width = '100%';  
renderer.domElement.style.height = '100%';

const controls = new OrbitControls(camera, renderer.domElement);
//controls.enableRotate = false;

let geometry = new THREE.BoxGeometry();
let material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
let cube = new THREE.Mesh(geometry, material);
scene.add(cube);

let size = 10; // 10x10 grid
let divisions = 20;
let centerLineColor = new THREE.Color(0xffffff); // red for the center line
let gridColor = new THREE.Color(0x888888); // green for the grid lines
let gridHelper = new THREE.GridHelper(size, divisions, centerLineColor, gridColor);
gridHelper.rotateOnAxis(new THREE.Vector3(1, 0, 0), Math.PI / 2);

scene.add(gridHelper);

camera.position.z = 5;
camera.position.y = 0;

function animate() {
  requestAnimationFrame(animate);
  cube.rotation.x += 0.01;
  cube.rotation.y += 0.01;
  controls.update(); // Add this line to update the controls
  renderer.render(scene, camera);
}

animate();

window.addEventListener('message', event => {
  const message = event.data; // The JSON data our extension sent

  switch (message.command) {
    case 'update':
      // Handle the 'update' message
      const text = message.text;
      // Display the text in some HTML element, or use it as you wish
      console.log(text);
      document.getElementById('info').textContent = text;

      break;
  }
});
window.addEventListener('resize', function() {
    // Update camera's aspect ratio
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();

    // Update the renderer's size
    renderer.setSize(window.innerWidth, window.innerHeight);
});

</script>
</body>
<style>
#info {
	position: absolute;
	top: 10px;
	width: 100%;
	text-align: center;
	z-index: 100;
	display:block;
}
body, html, canvas {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  display: block; /* added this to ensure it's block level */
}
</style>
</html>